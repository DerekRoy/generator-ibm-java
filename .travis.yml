language: java
jdk:
  - oraclejdk8
before_install:
  - wget http://services.gradle.org/distributions/gradle-3.5-bin.zip
  - wget https://github.com/github/hub/releases/download/v2.2.9/hub-linux-386-2.2.9.tgz
  - wget https://kubernetes-helm.storage.googleapis.com/helm-v2.7.2-linux-amd64.tar.gz
  - shasum -a 256 -c ./sha256.txt
  - unzip -qq gradle-3.5-bin.zip
  - tar -xvzf hub-linux-386-2.2.9.tgz
  - export GRADLE_HOME=$PWD/gradle-3.5
  - tar -xvf helm-v2.7.2-linux-amd64.tar.gz
  - export PATH=$GRADLE_HOME/bin:$PWD/hub-linux-386-2.2.9/bin/:$PWD/linux-amd64:$PATH
  - gradle -v
install:
  - nvm install 8.9.4
  - cd ./generator-java
  - ../install.sh
script:
  - ../build.sh
  - ../deploy.sh
branches:
  only:
  - develop
  - master