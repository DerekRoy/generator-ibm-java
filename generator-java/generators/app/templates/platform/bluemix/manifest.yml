applications:
- name: {{#firstAvailable bluemix.server.name appName}}{{/firstAvailable}}
  timeout: 180
  instances: 1
  {{#has frameworkType 'liberty'}}
  path: ./{{#has buildType 'maven'}}target{{/has}}{{#has buildType 'gradle'}}build{{/has}}/{{appName}}.zip
  memory: 512M
  buildpack: liberty-for-java
  {{/has}}
  {{#has frameworkType 'spring'}}
  path: ./{{#has buildType 'maven'}}target{{/has}}{{#has buildType 'gradle'}}build/libs/{{/has}}/{{appName}}-{{version}}.jar
  memory: 256M
  buildpack: java_buildpack
  {{/has}}
{{#bluemix}}
{{#server.host}}
  host: {{this}}
{{/server.host}}
{{^server.host}}
  random-route: true
{{/server.host}}
{{#server.domain}}
  domain: {{this}}
{{/server.domain}}
{{#server.services}}
  services:
{{/server.services}}
{{#each server.services}}
  - {{this}}
{{/each}}
{{#cloudant}}
env:
  services_autoconfig_excludes: cloudantNoSQLDB=config
{{/cloudant}}
{{#objectStorage}}
env:
  services_autoconfig_excludes: Object-Storage=config
{{/objectStorage}}
{{/bluemix}}
{{#has createType 'bff'}}
env:
  "OPENAPI_SPEC": "/{{appName}}/swagger/api"
{{/has}}
